apply plugin: 'groovy'
apply from: "$rootDir/gradle/maven.gradle"

dependencies {
    compile gradleApi()
    compile localGroovy()

    compile project(':lenskit-specs')
}

apply from: 'integration-tests.gradle'
check.dependsOn gradleTests

javadoc {
    onlyIf {
        // FIXME Get some documentation going!
        sourceSets.main.java.files.size() > 0
    }
}

groovydoc {
    link 'https://docs.gradle.org/current/groovydoc/', 'org.gradle'
    link '/apidocs/', 'org.lenskit.specs'
    footer '''
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/languages/groovy.min.js"></script>
      <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
    '''
    header '''
      <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/mono-blue.min.css" rel="stylesheet">
    '''
    // source rootProject.childProjects['lenskit-specs'].sourceSets.main.allJava
}
